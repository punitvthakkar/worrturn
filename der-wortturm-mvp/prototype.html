<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Der Wortturm - Prototype</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: #00ff41;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }

        /* Animated background */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            font-size: 3rem;
            color: #ff6b9d;
            text-shadow: 0 0 20px #ff6b9d;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #00d4ff;
            margin-bottom: 20px;
        }

        .game-area {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 30px;
            align-items: start;
        }

        .tower-section {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .tower {
            width: 200px;
            height: 600px;
            position: relative;
        }

        .floor {
            width: 100%;
            height: 35px;
            margin: 2px 0;
            border: 2px solid #333;
            background: linear-gradient(45deg, #1a1a2e, #2a2a4e);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .floor.active {
            background: linear-gradient(45deg, #ff6b9d, #ff8fb3);
            border-color: #ff6b9d;
            color: #000;
            box-shadow: 0 0 20px #ff6b9d;
        }

        .floor.completed {
            background: linear-gradient(45deg, #00ff41, #40ff71);
            border-color: #00ff41;
            color: #000;
            box-shadow: 0 0 10px #00ff41;
        }

        .question-area {
            background: rgba(0, 20, 40, 0.8);
            border: 2px solid #00d4ff;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 30px rgba(0, 212, 255, 0.3);
        }

        .question-text {
            font-size: 1.5rem;
            color: #fff;
            text-align: center;
            margin-bottom: 30px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .answers-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        .answer-btn {
            background: linear-gradient(45deg, #2a2a4e, #3a3a5e);
            border: 2px solid #00d4ff;
            color: #fff;
            padding: 15px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 5px;
            font-family: inherit;
        }

        .answer-btn:hover {
            background: linear-gradient(45deg, #00d4ff, #40e4ff);
            color: #000;
            box-shadow: 0 0 15px #00d4ff;
        }

        .answer-btn.correct {
            background: linear-gradient(45deg, #00ff41, #40ff71);
            border-color: #00ff41;
            color: #000;
        }

        .answer-btn.wrong {
            background: linear-gradient(45deg, #ff4757, #ff6b7a);
            border-color: #ff4757;
            color: #fff;
        }

        .lifelines {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }

        .lifeline-btn {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            border: 2px solid #ffd700;
            color: #000;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .lifeline-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px #ffd700;
        }

        .lifeline-btn.used {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .stats-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .stat-card {
            background: rgba(0, 20, 40, 0.8);
            border: 2px solid #00ff41;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.2);
        }

        .stat-title {
            color: #00ff41;
            font-size: 1.2rem;
            margin-bottom: 10px;
            text-align: center;
        }

        .score {
            font-size: 2rem;
            color: #ffd700;
            text-align: center;
            text-shadow: 0 0 10px #ffd700;
        }

        .leaderboard {
            max-height: 300px;
            overflow-y: auto;
        }

        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #333;
            color: #fff;
        }

        .game-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .control-btn {
            background: linear-gradient(45deg, #ff6b9d, #ff8fb3);
            border: 2px solid #ff6b9d;
            color: #000;
            padding: 15px 30px;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 5px;
            font-family: inherit;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 107, 157, 0.4);
        }

        .progress-info {
            text-align: center;
            margin-bottom: 20px;
            color: #00d4ff;
        }

        @media (max-width: 768px) {
            .game-area {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .title {
                font-size: 2rem;
            }
            
            .tower {
                width: 150px;
                height: 450px;
            }
            
            .floor {
                height: 25px;
                font-size: 0.7rem;
            }
            
            .answers-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="stars">
        <svg width="100%" height="100%" id="starfield"></svg>
    </div>

    <div class="container">
        <header class="header">
            <h1 class="title">DER WORTTURM</h1>
            <p class="subtitle">Climb Higher • Learn Faster • Compete Harder</p>
        </header>

        <div class="game-area">
            <!-- Tower Section -->
            <div class="tower-section">
                <div class="stat-card">
                    <div class="stat-title">Aktueller Score</div>
                    <div class="score" id="currentScore">0</div>
                </div>
                
                <div class="tower" id="tower">
                    <!-- Floors will be generated here -->
                </div>
                
                <div class="stat-card">
                    <div class="stat-title">Persönliche Bestleistung</div>
                    <div class="score" id="personalBest">8.500</div>
                    <div style="text-align: center; color: #00d4ff; margin-top: 10px;">
                        Etage 9 erreicht
                    </div>
                </div>
            </div>

            <!-- Question Section -->
            <div class="question-area">
                <div class="progress-info">
                    <span id="currentFloor">Etage 1</span> • <span id="difficulty">Einfach</span> • <span id="questionType">Bedeutung</span>
                </div>
                
                <div class="lifelines">
                    <button class="lifeline-btn" id="lifeline50" title="50:50">🎯</button>
                    <button class="lifeline-btn" id="lifelineAudience" title="Publikum">👥</button>
                    <button class="lifeline-btn" id="lifelineFriend" title="Freund">📞</button>
                    <button class="lifeline-btn" id="lifelineSkip" title="Tauschen">🔄</button>
                </div>

                <div class="question-text" id="questionText">
                    Was bedeutet "FREUNDSCHAFT"?
                </div>

                <div class="answers-grid" id="answersGrid">
                    <button class="answer-btn" data-answer="A">A: friendship</button>
                    <button class="answer-btn" data-answer="B">B: business</button>
                    <button class="answer-btn" data-answer="C">C: location</button>
                    <button class="answer-btn" data-answer="D">D: time</button>
                </div>

                <div class="game-controls">
                    <button class="control-btn" id="walkAwayBtn">Aussteigen</button>
                    <button class="control-btn" id="newGameBtn">Neues Spiel</button>
                </div>
            </div>

            <!-- Stats Section -->
            <div class="stats-section">
                <div class="stat-card">
                    <div class="stat-title">Heutige Bestenliste</div>
                    <div class="leaderboard">
                        <div class="leaderboard-item">
                            <span>🥇 Hans_M</span>
                            <span>127.500</span>
                        </div>
                        <div class="leaderboard-item">
                            <span>🥈 GermanPro</span>
                            <span>95.000</span>
                        </div>
                        <div class="leaderboard-item">
                            <span>🥉 WordMaster</span>
                            <span>78.200</span>
                        </div>
                        <div class="leaderboard-item">
                            <span>4. Du</span>
                            <span>8.500</span>
                        </div>
                        <div class="leaderboard-item">
                            <span>5. LinguaFan</span>
                            <span>6.750</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-title">Abzeichen</div>
                    <div style="text-align: center; margin-top: 15px;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">🏆 🎯 📚</div>
                        <div style="color: #ffd700; font-size: 0.9rem;">
                            Erste Schritte<br>
                            Blitzdenker<br>
                            Wortsammler
                        </div>
                        <div style="color: #666; margin-top: 10px; font-size: 0.8rem;">
                            3 von 25 Abzeichen
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let gameState = {
            currentFloor: 1,
            score: 0,
            lifelinesUsed: {
                fifty: false,
                audience: false,
                friend: false,
                skip: false
            },
            gameActive: true
        };

        // Floor configuration
        const floors = [
            { floor: 1, points: 100, difficulty: 'Einfach' },
            { floor: 2, points: 200, difficulty: 'Einfach' },
            { floor: 3, points: 300, difficulty: 'Einfach' },
            { floor: 4, points: 500, difficulty: 'Einfach' },
            { floor: 5, points: 1000, difficulty: 'Einfach' },
            { floor: 6, points: 2000, difficulty: 'Mittel' },
            { floor: 7, points: 4000, difficulty: 'Mittel' },
            { floor: 8, points: 8000, difficulty: 'Mittel' },
            { floor: 9, points: 16000, difficulty: 'Mittel' },
            { floor: 10, points: 32000, difficulty: 'Mittel' },
            { floor: 11, points: 64000, difficulty: 'Schwer' },
            { floor: 12, points: 125000, difficulty: 'Schwer' },
            { floor: 13, points: 250000, difficulty: 'Schwer' },
            { floor: 14, points: 500000, difficulty: 'Schwer' },
            { floor: 15, points: 1000000, difficulty: 'Schwer' }
        ];

        // Sample questions
        const questions = [
            {
                question: "Was bedeutet 'FREUNDSCHAFT'?",
                answers: ["friendship", "business", "location", "time"],
                correct: 0,
                type: "Bedeutung"
            },
            {
                question: "Welches Wort ist ein Synonym für 'SCHNELL'?",
                answers: ["langsam", "rasch", "schwer", "dunkel"],
                correct: 1,
                type: "Synonym"
            },
            {
                question: "Was ist das Gegenteil von 'HELL'?",
                answers: ["dunkel", "bright", "loud", "quiet"],
                correct: 0,
                type: "Gegenteil"
            },
            {
                question: "Ich gehe ___ Schule.",
                answers: ["zur", "zu der", "nach", "bei"],
                correct: 0,
                type: "Grammatik"
            },
            {
                question: "Wie ist die Steigerung von 'GUT'?",
                answers: ["guter, am gutesten", "besser, am besten", "mehr gut, am meisten gut", "gooder, goodest"],
                correct: 1,
                type: "Formen"
            }
        ];

        // Initialize the game
        function initGame() {
            createStarfield();
            generateTower();
            loadQuestion();
            updateUI();
            addEventListeners();
        }

        // Create animated starfield background
        function createStarfield() {
            const svg = document.getElementById('starfield');
            const width = window.innerWidth;
            const height = window.innerHeight;
            
            svg.setAttribute('width', width);
            svg.setAttribute('height', height);
            
            // Create 100 stars
            for (let i = 0; i < 100; i++) {
                const star = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                star.setAttribute('cx', Math.random() * width);
                star.setAttribute('cy', Math.random() * height);
                star.setAttribute('r', Math.random() * 2 + 1);
                star.setAttribute('fill', '#00ff41');
                star.setAttribute('opacity', Math.random() * 0.8 + 0.2);
                
                // Add twinkling animation
                const animate = document.createElementNS('http://www.w3.org/2000/svg', 'animate');
                animate.setAttribute('attributeName', 'opacity');
                animate.setAttribute('values', '0.2;1;0.2');
                animate.setAttribute('dur', Math.random() * 3 + 2 + 's');
                animate.setAttribute('repeatCount', 'indefinite');
                
                star.appendChild(animate);
                svg.appendChild(star);
            }
        }

        // Generate tower floors
        function generateTower() {
            const tower = document.getElementById('tower');
            tower.innerHTML = '';
            
            for (let i = floors.length - 1; i >= 0; i--) {
                const floor = document.createElement('div');
                floor.className = 'floor';
                floor.id = `floor-${floors[i].floor}`;
                floor.innerHTML = `${floors[i].floor}. ${floors[i].points.toLocaleString()}`;
                
                if (floors[i].floor === gameState.currentFloor) {
                    floor.classList.add('active');
                } else if (floors[i].floor < gameState.currentFloor) {
                    floor.classList.add('completed');
                }
                
                tower.appendChild(floor);
            }
        }

        // Load current question
        function loadQuestion() {
            const currentQuestion = questions[Math.floor(Math.random() * questions.length)];
            const currentFloorData = floors[gameState.currentFloor - 1];
            
            document.getElementById('questionText').textContent = currentQuestion.question;
            document.getElementById('currentFloor').textContent = `Etage ${gameState.currentFloor}`;
            document.getElementById('difficulty').textContent = currentFloorData.difficulty;
            document.getElementById('questionType').textContent = currentQuestion.type;
            
            const answersGrid = document.getElementById('answersGrid');
            answersGrid.innerHTML = '';
            
            const letters = ['A', 'B', 'C', 'D'];
            currentQuestion.answers.forEach((answer, index) => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.setAttribute('data-answer', letters[index]);
                btn.setAttribute('data-correct', index === currentQuestion.correct);
                btn.textContent = `${letters[index]}: ${answer}`;
                answersGrid.appendChild(btn);
            });
        }

        // Update UI elements
        function updateUI() {
            document.getElementById('currentScore').textContent = gameState.score.toLocaleString();
            generateTower();
            
            // Update lifeline states
            Object.keys(gameState.lifelinesUsed).forEach(lifeline => {
                const btnId = lifeline === 'fifty' ? 'lifeline50' : 
                             lifeline === 'audience' ? 'lifelineAudience' :
                             lifeline === 'friend' ? 'lifelineFriend' : 'lifelineSkip';
                const btn = document.getElementById(btnId);
                if (gameState.lifelinesUsed[lifeline]) {
                    btn.classList.add('used');
                    btn.disabled = true;
                }
            });
        }

        // Handle answer selection
        function selectAnswer(isCorrect, selectedBtn) {
            const allBtns = document.querySelectorAll('.answer-btn');
            
            if (isCorrect) {
                selectedBtn.classList.add('correct');
                gameState.score = floors[gameState.currentFloor - 1].points;
                
                // Animate success
                gsap.to(selectedBtn, {
                    scale: 1.1,
                    duration: 0.3,
                    yoyo: true,
                    repeat: 1
                });
                
                setTimeout(() => {
                    if (gameState.currentFloor < 15) {
                        gameState.currentFloor++;
                        loadQuestion();
                        updateUI();
                    } else {
                        // Game won!
                        alert('Gratulation! Sie haben den Wortturm erobert! 🏆');
                        resetGame();
                    }
                }, 1500);
                
            } else {
                selectedBtn.classList.add('wrong');
                // Show correct answer
                allBtns.forEach(btn => {
                    if (btn.getAttribute('data-correct') === 'true') {
                        btn.classList.add('correct');
                    }
                });
                
                // Animate failure
                gsap.to('.tower', {
                    x: -10,
                    duration: 0.1,
                    yoyo: true,
                    repeat: 5
                });
                
                setTimeout(() => {
                    alert(`Leider falsch! Ihr Endpunktzahl: ${gameState.score.toLocaleString()}`);
                    resetGame();
                }, 2000);
            }
            
            // Disable all buttons
            allBtns.forEach(btn => btn.disabled = true);
        }

        // Use lifeline
        function useLifeline(type) {
            if (gameState.lifelinesUsed[type]) return;
            
            gameState.lifelinesUsed[type] = true;
            
            switch(type) {
                case 'fifty':
                    // Remove two wrong answers
                    const wrongBtns = Array.from(document.querySelectorAll('.answer-btn'))
                        .filter(btn => btn.getAttribute('data-correct') === 'false');
                    const toRemove = wrongBtns.slice(0, 2);
                    toRemove.forEach(btn => {
                        btn.style.opacity = '0.3';
                        btn.disabled = true;
                    });
                    break;
                    
                case 'audience':
                    // Show audience poll (simulated)
                    alert('Publikumstipp: 67% haben Antwort A gewählt, 21% Antwort B, 8% Antwort C, 4% Antwort D');
                    break;
                    
                case 'friend':
                    // Show friend hint
                    alert('Freund: "Ich bin mir ziemlich sicher, dass es A ist. Das Wort kommt aus dem Lateinischen und bedeutet..."');
                    break;
                    
                case 'skip':
                    // Skip question
                    loadQuestion();
                    break;
            }
            
            updateUI();
        }

        // Walk away with current score
        function walkAway() {
            if (gameState.score > 0) {
                alert(`Sie gehen mit ${gameState.score.toLocaleString()} Punkten! Gut gemacht!`);
                resetGame();
            }
        }

        // Reset game
        function resetGame() {
            gameState = {
                currentFloor: 1,
                score: 0,
                lifelinesUsed: {
                    fifty: false,
                    audience: false,
                    friend: false,
                    skip: false
                },
                gameActive: true
            };
            
            // Reset lifeline buttons
            document.querySelectorAll('.lifeline-btn').forEach(btn => {
                btn.classList.remove('used');
                btn.disabled = false;
            });
            
            loadQuestion();
            updateUI();
        }

        // Add event listeners
        function addEventListeners() {
            // Answer buttons
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('answer-btn') && !e.target.disabled) {
                    const isCorrect = e.target.getAttribute('data-correct') === 'true';
                    selectAnswer(isCorrect, e.target);
                }
            });
            
            // Lifeline buttons
            document.getElementById('lifeline50').addEventListener('click', () => useLifeline('fifty'));
            document.getElementById('lifelineAudience').addEventListener('click', () => useLifeline('audience'));
            document.getElementById('lifelineFriend').addEventListener('click', () => useLifeline('friend'));
            document.getElementById('lifelineSkip').addEventListener('click', () => useLifeline('skip'));
            
            // Control buttons
            document.getElementById('walkAwayBtn').addEventListener('click', walkAway);
            document.getElementById('newGameBtn').addEventListener('click', resetGame);
            
            // Keyboard support
            document.addEventListener('keydown', (e) => {
                if (['a', 'b', 'c', 'd'].includes(e.key.toLowerCase())) {
                    const btn = document.querySelector(`[data-answer="${e.key.toUpperCase()}"]`);
                    if (btn && !btn.disabled) {
                        btn.click();
                    }
                }
            });
            
            // Resize handler for stars
            window.addEventListener('resize', () => {
                createStarfield();
            });
        }

        // Initialize game when page loads
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>